/*! swlcalc version 1.5.0 2019-02-10 */
!function(){function a(a,b){return a.write('<div class="span4">\x3c!-- [ Set rarity v ] --\x3e<div class="btn-group"><a class="btn btn-button-bar dropdown-toggle" data-toggle="dropdown" href="#">Set rarity <span class="caret"></span></a><ul class="dropdown-menu button-bar-dropdown"><li><a id="btn-all-standard"><span class="fix-link">All to <span class="color-standard">Standard</span></span></a></li><li><a id="btn-all-superior"><span class="fix-link">All to <span class="color-superior">Superior</span></span></a></li><li><a id="btn-all-epic"><span class="fix-link">All to <span class="color-epic">Epic</span></span></a></li><li><a id="btn-all-mythic" ><span class="fix-link">All to <span class="color-mythic">Mythic</span></span></a></li><li><a id="btn-all-legendary"><span class="fix-link">All to <span class="color-legendary">Legendary</span></span></a></li></ul></div>\x3c!-- [ Set quality v ] --\x3e<div class="btn-group"><a class="btn btn-button-bar dropdown-toggle" data-toggle="dropdown" href="#">Set quality <span class="caret"></span></a><ul class="dropdown-menu button-bar-dropdown"><li><a id="btn-all-1-pip"><span class="fix-link">All to 1 pip</span></a></li><li><a id="btn-all-2-pip"><span class="fix-link">All to 2 pips</span></a></li><li><a id="btn-all-3-pip"><span class="fix-link">All to 3 pips</span></a></li></ul></div>\x3c!-- [ Set level v ] --\x3e<div class="btn-group"><a class="btn btn-button-bar dropdown-toggle" data-toggle="dropdown" href="#">Set level <span class="caret"></span></a><ul class="dropdown-menu button-bar-dropdown"><li><a id="btn-all-lvl-min"><span class="fix-link">All to min</span></a></li><li><a id="btn-all-lvl-max"><span class="fix-link">All to max</span></a></li></ul></div></div><div class="span4 anima-allocation-span">\x3c!-- Anima allocation [ 100% DPS |V] --\x3e<div class="btn-group anima-allocation-div"><p class="anima-allocation-label">Anima allocation :</p><select id="select-anima-allocation" class="anima-allocation-select color-dps"><option value="dps" class="color-dps" selected="true">100% Damage</option><option value="heal" class="color-heal">100% Healing</option><option value="tank" class="color-tank">100% Survivability</option></select></div></div><div class="span4">\x3c!-- [ Reset ]--\x3e<div class="btn-group"><button id="btn-reset" class="btn btn-danger">Reset</button></div>\x3c!-- [ Export ] --\x3e<div class="btn-group"><a class="btn btn-primary dropdown-toggle" data-toggle="dropdown" href="#">Export <span class="caret"></span></a><ul class="dropdown-menu"><li><a class="export" href="#open-export-modal" data="url" data-toggle="modal">URL</a></li></ul></div>\x3c!-- Pop-up window on [ Export ] --\x3e<div id="open-export-modal" class="modal hide fade"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button><h5>Export</h5></div><div class="modal-body">Copy this and share:<br/><textarea id="export-textarea" class="field span12" wrap="off" rows="10"></textarea></div></div></div>')}dust.register("buttonbar",a)}(),function(){function a(a,b){return a.write('<div class="masthead"><div class="btn-group pull-right"><a class="btn btn-info" href="https://github.com/AntoineThebaud/swlcalc" target="_blank" style="color: white;">Github</a><a class="btn" href="https://forums.funcom.com/t/swlcalc-gear-planner-for-swl/1908" target="_blank">forum post</a><a href="http://dgamers.guildi.com/" target="_blank"><img class="logo-dg" src="assets/images/logos/DG.png"/></a></div><div class="div-logo"><img class="logo-swlcalc" src="assets/images/logos/swlcalc.png" /><span class="logo-slogan lightgrey">A gear planner for </span><img class="logo-swl" src="assets/images/logos/swl.png"/></div></div><hr><div class="row-fluid"><div class="span12">').partial("buttonbar",b,null).write('</div></div><hr/><div class="row-fluid"><div class="span8">').partial("slots",b,null).write('</div><div class="span3">').partial("summary",b,null).write('</div></div><hr><div class="footer"><p>swlcalc &copy; 2017-2019 Antoine THEBAUD. Version <a href="https://github.com/AntoineThebaud/swlcalc/tree/1.5.0" target="_new">1.5.0</a>. Hosted on Github Pages.</p></div>')}dust.register("container",a)}(),function(){function a(a,b){return a.write('<select id="').reference(b.get("id_prefix"),b,"h").write("-").reference(b.get("id_suffix"),b,"h").write('-level" title="Please select level"><option value="20">20</option><option value="19">19</option><option value="18">18</option><option value="17">17</option><option value="16">16</option><option value="15">15</option><option value="14">14</option><option value="13">13</option><option value="12">12</option><option value="11">11</option><option value="10">10</option><option value="9">9</option><option value="8">8</option><option value="7">7</option><option value="6">6</option><option value="5">5</option><option value="4">4</option><option value="3">3</option><option value="2">2</option><option value="1">1</option></select>')}dust.register("levelselect",a)}(),function(){function a(a,b){return a.write('<select id="').reference(b.get("id_prefix"),b,"h").write("-").reference(b.get("id_suffix"),b,"h").write('-quality" title="Please select quality"><option value="1">').reference(b.get("pip1_name"),b,"h").write('</option><option value="2">').reference(b.get("pip2_name"),b,"h").write('</option><option value="3">').reference(b.get("pip3_name"),b,"h").write("</option></select>")}dust.register("qualityselect",a)}(),function(){function a(a,b){return a.write('<select id="').reference(b.get("id_prefix"),b,"h").write("-").reference(b.get("id_suffix"),b,"h").write('-rarity" title="Please select rarity"><option value="standard" class="color-standard">Standard</option><option value="superior" class="color-superior">Superior</option><option value="epic" class="color-epic">Epic</option><option value="mythic" class="color-mythic">Mythic</option><option value="legendary" class="color-legendary">Legendary</option></select>')}dust.register("rarityselect",a)}(),function(){function a(a,d){return a.section(d.get("slots"),d,{else:b,block:c},null)}function b(a,b){return a.write("<p>No slots found (Bug)!</p>")}function c(a,b){return a.write('<div id="').reference(b.get("id_prefix"),b,"h").write('-slot" class="slot"><table class="table-title"><tr><td class="td-title"><span><h4 class="slot">').reference(b.get("name"),b,"h").write('</h4><h4 id="').reference(b.get("id_prefix"),b,"h").write('-equipment-name" class="slot-name"></h4><span id="').reference(b.get("id_prefix"),b,"h").write('-name-warning" class="label label-important"><a class="slot-warning" href="#" data-toggle="tooltip"><i class="icon-warning-sign icon-white"></i></a></span></span></td>').exists(b.get("is_weapon"),b,{block:d},null).write('<td class="slot-ilvl">Item Power : <span id="').reference(b.get("id_prefix"),b,"h").write('-ilvl">0</span></td></tr></table><table class="table table-slots"><tr>').exists(b.get("is_weapon"),b,{else:e,block:f},null).write('<td class="upgrade-label rarity-label"><strong>Rarity :</strong></td><td class="upgrade-select rarity-select">').partial("rarityselect",b,{id_suffix:"equipment"}).write('</td><td class="stat-value stat-inSlot"><span id="').reference(b.get("id_prefix"),b,"h").write('-equipment-power-rating">0</span>').exists(b.get("is_weapon"),b,{else:g,block:h},null).write('</td></tr><tr class="tr-with-icon"><td class="equipment-img"><img id="').reference(b.get("id_prefix"),b,"h").write('-equipment-img-quality" class="equipment-icon-quality" src="assets/images/icons/quality/1.png"/><img id="').reference(b.get("id_prefix"),b,"h").write('-equipment-img-rarity" class="equipment-icon-rarity" src=""/><img id="').reference(b.get("id_prefix"),b,"h").write('-equipment-img-icon" class="equipment-icon-item" src="" alt="image"/><div id="').reference(b.get("id_prefix"),b,"h").write('-equipment-label-level" class="equipment-label-level border-standard">20</div></td><td class="equipment-select">').exists(b.get("is_weapon"),b,{else:i,block:j},null).write('</td><td class="upgrade-label quality-label"><strong>Quality :</strong></td><td class="upgrade-select quality-select">').exists(b.get("is_weapon"),b,{else:k,block:l},null).write('</td><td rowspan="2" class="item-description"><span id="').reference(b.get("id_prefix"),b,"h").write('-equipment-description"></span></td></tr><tr><td rowspan="2" class="filler"></td><td rowspan="2" class="filler"></td><td rowspan="2" class="upgrade-label level-label"><strong>Level :</strong></td><td rowspan="2" class="upgrade-select level-select"><input id="').reference(b.get("id_prefix"),b,"h").write('-equipment-level" type="range" min="1" max="20" value="20" class="level-slider"></td></tr><tr><td class="ilvl"><span id="').reference(b.get("id_prefix"),b,"h").write('-equipment-ilvl">0</span></td></tr></table><table id="').reference(b.get("id_prefix"),b,"h").write('-glyphs" class="table table-slots"><tr><td class="item-title" colspan="2">Glyph</td><td class="upgrade-label rarity-label"><strong>Rarity :</strong></td><td class="upgrade-select rarity-select">').partial("rarityselect",b,{id_suffix:"glyph"}).write('</td><td class="filler"></td></tr><tr class="tr-with-icon"><td class="glyph-img"><a href="#" class="glyph-tooltip" data-toggle="tooltip" title="Glyph for the ').reference(b.get("name"),b,"h").write(' slot. Choose which rarity, quality, level and stats it will have in your build."><img id="').reference(b.get("id_prefix"),b,"h").write('-glyph-img-quality" class="glyph-icon-quality" src="assets/images/icons/quality/1.png"/><img id="').reference(b.get("id_prefix"),b,"h").write('-glyph-img-rarity" class="glyph-icon-rarity" src="assets/images/icons/rarity/none-42x42.png"/><img id="').reference(b.get("id_prefix"),b,"h").write('-glyph-img-icon" class="glyph-icon-item" src="assets/images/icons/glyph/none.png" alt="Glyph"/><div id="').reference(b.get("id_prefix"),b,"h").write('-glyph-label-level" class="glyph-label-level border-standard">20</div></a></td><td class="glyph-select"><select id="').reference(b.get("id_prefix"),b,"h").write('-glyph-id" title="Please select stat"><option value="none" selected="true">None</option><option value="hit-rating">Accurate</option><option value="critical-rating">Fierce</option><option value="critical-power">Devastating</option><option value="evade-rating">Elusive</option><option value="defense-rating">Stalwart</option></select></td><td class="upgrade-label quality-label"><strong>Quality :</strong></td><td class="upgrade-select quality-select">').partial("qualityselect",b,{id_suffix:"glyph",pip1_name:"Crude",pip2_name:"Simple",pip3_name:"Intricate"}).write('</td><td class="stat-value stat-inSlot"><span id="').reference(b.get("id_prefix"),b,"h").write('-glyph-rating">0</span><span id="').reference(b.get("id_prefix"),b,"h").write('-glyph-label"></span></td></tr><tr><td class="filler"></td><td class="filler"></td><td class="upgrade-label level-label"><strong>Level :</strong></td><td class="upgrade-select level-select"><input id="').reference(b.get("id_prefix"),b,"h").write('-glyph-level" type="range" min="1" max="20" value="20" class="level-slider"></td><td class="ilvl"><span id="').reference(b.get("id_prefix"),b,"h").write('-glyph-ilvl">0</span></td></tr></table><table id="').reference(b.get("id_prefix"),b,"h").write('-signets" class="table table-slots">').exists(b.get("is_weapon"),b,{else:m,block:n},null).write("</table></div>")}function d(a,b){return a.write('<td><a id="').reference(b.get("id_prefix"),b,"h").write('-swap-weapon" class="btn btn-success swap-weapon"><i class="icon-retweet icon-white icon-align-left"></i>    Swap weapon</a></td>')}function e(a,b){return a.write('<td class="item-title" colspan="2">Talisman</td>')}function f(a,b){return a.write('<td class="item-title" colspan="2">Weapon</td>')}function g(a,b){return a.write("<span> Power Rating</span>")}function h(a,b){return a.write("<span> Weapon Power</span>")}function i(a,b){return a.write('<select id="').reference(b.get("id_prefix"),b,"h").write('-equipment-id" title="Please select talisman"></select>')}function j(a,b){return a.write('<select id="').reference(b.get("id_prefix"),b,"h").write('-equipment-id" title="Please select weapon"></select>')}function k(a,b){return a.partial("qualityselect",b,{id_suffix:"equipment",pip1_name:"Faded",pip2_name:"Luminous",pip3_name:"Radiant"})}function l(a,b){return a.partial("qualityselect",b,{id_suffix:"equipment",pip1_name:"MK I",pip2_name:"MK II",pip3_name:"MK III"})}function m(a,b){return a.write('<tr><td class="item-title" colspan="2">Signet</td><td class="upgrade-label rarity-label"><strong>Rarity :</strong></td><td class="upgrade-select rarity-select">').partial("rarityselect",b,{id_suffix:"signet"}).write('</td><td id="').reference(b.get("id_prefix"),b,"h").write('-signet-description" class="item-description"></td></tr><tr class="tr-with-icon"><td class="signet-img"><a href="#" class="signet-tooltip" data-toggle="tooltip" title="Signet for the ').reference(b.get("name"),b,"h").write(' slot. Choose the rarity and type of signet."><img id="').reference(b.get("id_prefix"),b,"h").write('-signet-img-rarity" class="signet-icon-rarity" src="assets/images/icons/rarity/none-42x42.png"/><img id="').reference(b.get("id_prefix"),b,"h").write('-signet-img-icon" class="signet-icon-item" src="assets/images/icons/signet/none.png" alt="Signet"/><div id="').reference(b.get("id_prefix"),b,"h").write('-signet-label-level" class="signet-label-level border-standard">20</div></a></td><td class="signet-select"><select id="').reference(b.get("id_prefix"),b,"h").write('-signet-id" title="Please select signet"></select></td><td class="upgrade-label quality-label"> \x3c!-- class is "quality.." instead of "level.." because we skip quality select for signets --\x3e<strong>Level :</strong></td><td class="upgrade-select quality-select"> \x3c!-- class is "quality.." instead of "level.." because we skip quality select for signets --\x3e<input id="').reference(b.get("id_prefix"),b,"h").write('-signet-level" type="range" min="1" max="20" value="20" class="level-slider"></td><td class="ilvl"><span id="').reference(b.get("id_prefix"),b,"h").write('-signet-ilvl">0</span></td></tr>')}function n(a,b){return a.write('<tr><td class="item-title" colspan="2">Suffix</td><td id="').reference(b.get("id_prefix"),b,"h").write('-signet-description" class="item-description" colspan="3" rowspan="2"></td><tr><td class="signet-select" colspan="2"><select id="').reference(b.get("id_prefix"),b,"h").write('-signet-id" title="Please select signet"></select></td></tr>')}dust.register("slots",a)}(),function(){function a(a,b){return a.write('<div id="summary"><div id="table-primary"><h4>Gear stats</h4><table class="table table-stats"><thead><th>Primary Stats</th><th>Value</th></thead><tbody><tr><td class="stat-name">Item Power</td><td id="stat-ilvl" class="stat-value stat-inSummary">0</td></tr><tr><td class="stat-name">Power Rating</td><td id="stat-power-rating" class="stat-value stat-inSummary">0</td></tr><tr><td class="stat-name">Weapon Power</td><td id="stat-weapon-power" class="stat-value stat-inSummary">0</td></tr><tr><td class="stat-name">Attack Rating</td><td id="stat-attack-rating" class="stat-value stat-inSummary">0</td></tr><tr><td class="stat-name">Heal Rating</td><td id="stat-heal-rating" class="stat-value stat-inSummary">0</td></tr><tr><td class="stat-name">Hitpoints</td><td id="stat-hitpoints" class="stat-value stat-inSummary">0</td></tr><tr><td class="stat-name">Combat Power</td><td id="stat-combat-power" class="stat-value stat-inSummary">0</td></tr><tr><td class="stat-name">Healing Power</td><td id="stat-healing-power" class="stat-value stat-inSummary">0</td></tr></tbody></table></div><div id="table-offensive"><table class="table table-stats"><thead><th>Offensive Stats</th><th>Value</th></thead><tbody><tr><td class="stat-name">Critical Rating</td><td id="stat-critical-rating" class="stat-value stat-inSummary">0 %</td></tr><tr><td class="stat-name">Critical Chance %</td><td id="stat-critical-chance" class="stat-value stat-inSummary">0</td></tr><tr><td class="stat-name">Critical Power Rating</td><td id="stat-critical-power" class="stat-value stat-inSummary">0</td></tr><tr><td class="stat-name">Critical Power %</td><td id="stat-critical-power-percentage" class="stat-value stat-inSummary">0 %</td></tr><tr><td class="stat-name">Hit Rating</td><td id="stat-hit-rating" class="stat-value stat-inSummary">0</td></tr><tr><td class="stat-name">Glance Reduction %</td><td id="stat-glance-reduction" class="stat-value stat-inSummary">0%</td></tr></tbody></table></div><div id="table-defensive"><table class="table table-stats"><thead><th>Defensive Stats</th><th>Value</th></thead><tbody><tr><td class="stat-name">Defense Rating</td><td id="stat-defense-rating" class="stat-value stat-inSummary">0</td></tr><tr><td class="stat-name">Glance Chance %</td><td id="stat-glance-chance" class="stat-value stat-inSummary">0%</td></tr><tr><td class="stat-name">Evade Rating</td><td id="stat-evade-rating" class="stat-value stat-inSummary">0</td></tr><tr><td class="stat-name">Evade Chance %</td><td id="stat-evade-chance" class="stat-value stat-inSummary">0%</td></tr>\x3c!--below stats are not functionnal yet--\x3e<tr><td class="stat-name not-functionnal">Physical Protection</td><td id="stat-physical-protection" class="not-functionnal stat-value stat-inSummary">249</td></tr><tr><td class="stat-name not-functionnal">Magical Protection</td><td id="stat-magical-protection" class="not-functionnal stat-value stat-inSummary">249</td></tr></tbody></table></div></div>')}dust.register("summary",a)}(),$(document).ready(function(){swlcalc.init()});var swlcalc=swlcalc||{};swlcalc=function(){var a=function(){$("#btn-reset").trigger("click")},b=function(){$(".equipment-tooltip, .glyph-tooltip, .signet-tooltip").tooltip({placement:"left"}),$("#table-primary > label").tooltip({placement:"left"})},c=function(a){dust.render("container",{slots:swlcalc.data.template_data.slots,signets:swlcalc.data.signets},function(a,b){a&&console.log(a),$(".container").html(b)})},d=function(){var a=$.getUrlVars();return!$.isEmptyObject(a)&&9==Object.keys(a).length&&(swlcalc.import.start(a),!0)},e=function(){swlcalc.gear.init();for(var a=0;a<swlcalc.data.template_data.slots.length;a++)f(swlcalc.data.template_data.slots[a]);swlcalc.button.init(),swlcalc.buttonBar.init(),swlcalc.summary.init(),swlcalc.export.init()},f=function(a){swlcalc.select[a.id_prefix]=new swlcalc.select.SelectHandler(a),swlcalc.select[a.id_prefix].init()};return{init:function(){c(swlcalc.data.template_data),e(),d()||a(),b(),$("#summary").scrollToFixed()}}}();var swlcalc=swlcalc||{};swlcalc.summary=function(){var a=function(){},b="dps",c=function(){g(),k(),v(),d()},d=function(a){window.location.hash=swlcalc.export.createExportUrl()},e=function(){return{primary:h(),offensive_defensive:l()}},f=function(a,b){$("#stat-"+a).text(b)},g=function(){var a=h();for(var b in a)a.hasOwnProperty(b)&&f(b,a[b])},h=function(){var a={"combat-power":0,"healing-power":0,"weapon-power":0,hitpoints:7512,"attack-rating":4322,"heal-rating":4310,"power-rating":0,ilvl:0};for(var c in swlcalc.gear.slots){var d=swlcalc.gear.slots[c];a.ilvl+=d.iLvl(),d.isWeapon()&&!d.weaponDrawn||(d.isWeapon()&&"none"!=d.equipmentId()?a["weapon-power"]=d.equipmentPowerRating():d.isWeapon()||"none"==d.equipmentId()||(a["power-rating"]+=d.equipmentPowerRating()))}if("dps"==b)a["attack-rating"]+=a["power-rating"];else if("heal"==b)a["heal-rating"]+=a["power-rating"];else if("tank"==b){var e=1.427675;a.hitpoints+=Math.round(a["power-rating"]*e)}return a["combat-power"]=i(a["attack-rating"],a["weapon-power"]),a["healing-power"]=j(a["heal-rating"],a["weapon-power"]),a.ilvl=r(a.ilvl),a},i=function(a,b){var c=13+1/3;return Math.round((a+b)/c)},j=function(a,b){var c=13+1/3;return Math.round((a+b)/c)},k=function(){var a=l();s(a)},l=function(){var a={"critical-rating":756,"critical-chance":1,"critical-power":1008,"critical-power-percentage":25,"hit-rating":756,"glance-reduction":0,"defense-rating":753,"glance-chance":0,"evade-rating":753,"evade-chance":0};for(var b in swlcalc.gear.slots){var c=swlcalc.gear.slots[b];c.isWeapon()&&!c.weaponDrawn||(a[c.glyphId()]+=c.glyphRating())}return a["critical-chance"]+=m(a["critical-rating"]),a["critical-power-percentage"]+=n(a["critical-power"]),a["glance-reduction"]=q(a["hit-rating"]),a["glance-chance"]=p(a["defense-rating"]),a["evade-chance"]=o(a["evade-rating"]),a["critical-rating"]=a["critical-rating"].toFixed(0),a["critical-chance"]=a["critical-chance"].toFixed(1),a["critical-power"]=a["critical-power"].toFixed(0),a["critical-power-percentage"]=a["critical-power-percentage"].toFixed(1),a["evade-chance"]=a["evade-chance"].toFixed(1),a},m=function(a){var b=6536,c=157.49,d=7.5;return a<b?d+swlcalc.util.precisionRound(a/c,1):d+swlcalc.util.precisionRound(b/c+(a-b)/683,1)},n=function(a){var b=3258,c=28.31,d=30;return a<b?d+swlcalc.util.precisionRound(a/c,1):d+swlcalc.util.precisionRound(b/c+(a-b)/136,1)},o=function(a){var b=4221,c=145.55;return a<b?swlcalc.util.precisionRound(a/c,1):swlcalc.util.precisionRound(b/c+(a-b)/977.4,1)},p=function(a){var b=4221,c=101.71;return a<b?swlcalc.util.precisionRound(a/c,1):swlcalc.util.precisionRound(b/c+(a-b)/683,1)},q=function(a){return swlcalc.util.precisionRound(a/50.85,1)},r=function(a){return Math.round(a/9)},s=function(a){for(var b in a)a.hasOwnProperty(b)&&(a[b]>0?$("#stat-"+b).html(t(b)?a[b].toString()+"%":"+"+a[b]):$("#stat-"+b).html(t(b)?"0%":"0"))},t=function(a){return"critical-power-percentage"==a||"critical-chance"==a||"glance-reduction"==a||"evade-chance"==a||"glance-chance"==a},u=function(a){b=a,this.updateAllStats()},v=function(){for(var a in swlcalc.gear.slots)swlcalc.gear.slots[a].updateEquipmentBonuses(w(),x()),swlcalc.gear.slots[a].updateSignetBonus(w(),x())},w=function(){return parseInt($("#stat-combat-power").text())},x=function(){return parseInt($("#stat-healing-power").text())};return{init:a,calculateCriticalChance:m,calculateCriticalPowerPercentage:n,calculateEvadeChance:o,calculateCombatPower:i,collectPrimaryStats:h,collectOffensiveDefensiveStats:l,collectAllStats:e,updateAllStats:c,updateDescriptions:v,setAnimaAllocation:u}}();var swlcalc=swlcalc||{};swlcalc.select=swlcalc.select||{},swlcalc.select.SelectHandler=function(a){var b=swlcalc.gear.slots[a.id_prefix];this.init=function(){this.bindEvents(),this.addSignetsToSelect(),this.addItemsToSelect()},this.bindEvents=function(){b.el.equipmentId.change(this.handleEquipmentItemChange),b.el.equipmentRarity.change(this.handleEquipmentRarityChange),b.el.equipmentQuality.change(this.handleEquipmentQualityChange),b.el.equipmentLevel.change(this.handleEquipmentLevelChange),b.el.glyphId.change(this.handleGlyphChange),b.el.glyphRarity.change(this.handleGlyphRarityChange),b.el.glyphQuality.change(this.handleGlyphQualityChange),b.el.glyphLevel.change(this.handleGlyphLevelChange),"weapon"==a.kind?b.el.signetId.change(this.handleSuffixChange):(b.el.signetId.change(this.handleSignetChange),b.el.signetRarity.change(this.handleSignetRarityChange),b.el.signetLevel.change(this.handleSignetLevelChange))},this.addItemsToSelect=function(){var c=swlcalc.data.equipments.slot[a.kind].slice();b.el.equipmentId.append($("<option>",{value:"none",text:"None",selected:"true"})),"weapon"==a.group?(c.sort(function(a,b){return swlcalc.util.sortAsc(a.type+a.name.toLowerCase(),b.type+b.name.toLowerCase())}),c.forEach(function(a){b.el.equipmentId.append($("<option>",{value:a.id,text:"["+a.type+"] "+a.name}))})):(c.sort(function(a,b){return swlcalc.util.sortAsc(a.name.toLowerCase(),b.name.toLowerCase())}),c.forEach(function(a){b.el.equipmentId.append($("<option>",{value:a.id,text:a.name}))}))},this.addSignetsToSelect=function(){b.el.signetId.append($("<option>",{value:"none",text:"None",selected:"true"})),this.updateToDefaultSignet();var c=swlcalc.data.signets.slot[a.kind].slice();c.sort(function(a,b){return swlcalc.util.sortAsc(a.name.toLowerCase(),b.name.toLowerCase())}),$.each(c,function(a,c){b.el.signetId.append($("<option>",{value:c.id,text:c.name}))})};var c=function(a){$(a).attr("class","color-"+a.value)};this.updateToDefaultSignet=function(){$("#"+a.id_prefix+"-signet-img-icon").attr("src","assets/images/icons/signet/none.png"),$("#"+a.id_prefix+"-signet-img-rarity").attr("src","assets/images/icons/rarity/none-42x42.png")},this.handleEquipmentItemChange=function(a){b.updateEquipment(),b.updateEquipmentPowerRating(),b.updateEquipmentILvl(),swlcalc.summary.updateAllStats()},this.handleEquipmentRarityChange=function(a){c(this),b.updateEquipmentImgRarity(),b.updateEquipmentLevel(),b.updateEquipmentPowerRating(),b.updateEquipmentILvl(),swlcalc.summary.updateAllStats()},this.handleEquipmentQualityChange=function(a){b.updateEquipmentPowerRating(),b.updateEquipmentImgQuality(),swlcalc.summary.updateAllStats()},this.handleEquipmentLevelChange=function(a){b.updateEquipmentILvl(),b.updateEquipmentPowerRating(),b.updateEquipmentLabelLevelText(),swlcalc.summary.updateAllStats()},this.handleGlyphChange=function(a){b.updateGlyphImgIcon(),b.updateGlyphRating(),b.updateGlyphLabel(),b.updateGlyphILvl(),swlcalc.summary.updateAllStats()},this.handleGlyphRarityChange=function(a){c(this),b.updateGlyphImgRarity(),b.updateGlyphLabelLevelColor(),b.updateGlyphILvl(),b.updateGlyphRating(),swlcalc.summary.updateAllStats()},this.handleGlyphQualityChange=function(a){b.updateGlyphRating(),b.updateGlyphImgQuality(),swlcalc.summary.updateAllStats()},this.handleGlyphLevelChange=function(a){b.updateGlyphRating(),b.updateGlyphILvl(),b.updateGlyphLabelLevelText(),swlcalc.summary.updateAllStats()},this.handleSuffixChange=function(a){b.updateSignet(),swlcalc.summary.updateAllStats()},this.handleSignetChange=function(a){b.updateSignet(),b.updateSignetILvl(),swlcalc.summary.updateAllStats()},this.handleSignetRarityChange=function(a){c(this),b.updateSignetImgIcon(),b.updateSignetImgRarity(),b.updateSignetLabelLevelColor(),b.updateSignetILvl(),swlcalc.summary.updateAllStats()},this.handleSignetLevelChange=function(a){b.updateSignetILvl(),b.updateSignetLabelLevelText(),swlcalc.summary.updateAllStats()}};var swlcalc=swlcalc||{};swlcalc.button=function(){var a={},b=function(){c("weapon"),c("weapon2")},c=function(b){a[b]=new swlcalc.button.SwapWeaponButton(b),a[b].init()};return{init:b}}(),swlcalc.button.SwapWeaponButton=function(a){var b=this;this.init=function(){this.bindEvents()},this.bindEvents=function(){$("#"+a+"-swap-weapon").on("click",this.weaponSwap)},this.weaponSwap=function(c){swlcalc.gear.slots[a].sheathWeapon(),swlcalc.gear.slots[b.otherWeapon()].drawWeapon(),swlcalc.summary.updateAllStats()},this.otherWeapon=function(){return"weapon"==a?"weapon2":"weapon"}};var swlcalc=swlcalc||{};swlcalc.buttonBar=function(){var a={},b=function(){return{select_anima_allocation:$("#select-anima-allocation"),btn_all_standard:$("#btn-all-standard"),btn_all_superior:$("#btn-all-superior"),btn_all_epic:$("#btn-all-epic"),btn_all_mythic:$("#btn-all-mythic"),btn_all_legendary:$("#btn-all-legendary"),btn_all_1_pip:$("#btn-all-1-pip"),btn_all_2_pip:$("#btn-all-2-pip"),btn_all_3_pip:$("#btn-all-3-pip"),btn_all_lvl_min:$("#btn-all-lvl-min"),btn_all_lvl_max:$("#btn-all-lvl-max"),btn_reset:$("#btn-reset")}},c=function(){a=b(),d()},d=function(){a.select_anima_allocation.on("change",e),a.btn_all_standard.on("click",f),a.btn_all_superior.on("click",f),a.btn_all_epic.on("click",f),a.btn_all_mythic.on("click",f),a.btn_all_legendary.on("click",f),a.btn_all_1_pip.on("click",g),a.btn_all_2_pip.on("click",g),a.btn_all_3_pip.on("click",g),a.btn_all_lvl_min.on("click",h),a.btn_all_lvl_max.on("click",h),a.btn_reset.on("click",i)},e=function(a){$(this).attr("class","anima-allocation-select color-"+this.value),swlcalc.summary.setAnimaAllocation(a.target.value)},f=function(a){var b=a.currentTarget.id.split("-")[2];for(var c in swlcalc.gear.slots){var d=swlcalc.gear.slots[c];d.equipmentRarity(b),d.el.equipmentRarity.change(),d.glyphRarity(b),d.el.glyphRarity.change(),d.signetRarity(b),d.el.signetRarity.change()}swlcalc.summary.updateAllStats()},g=function(a){var b=a.currentTarget.id.split("-")[2];for(var c in swlcalc.gear.slots){var d=swlcalc.gear.slots[c];d.equipmentQuality(b),d.el.equipmentQuality.change(),d.glyphQuality(b),d.el.glyphQuality.change()}swlcalc.summary.updateAllStats()},h=function(a){var b=a.currentTarget.id.split("-")[3];for(var c in swlcalc.gear.slots){var d=swlcalc.gear.slots[c];d.equipmentLevel(d.getAttrFromEquipmentLevel(b)),d.el.equipmentLevel.change(),d.glyphLevel(d.getAttrFromGlyphLevel(b)),d.el.glyphLevel.change(),d.signetLevel(d.getAttrFromSignetLevel(b)),d.el.signetLevel.change()}swlcalc.summary.updateAllStats()},i=function(a){swlcalc.gear.reset(),swlcalc.summary.updateAllStats()};return{el:a,init:c,setRarityOnAllSlots:f,resetGear:i}}();var swlcalc=swlcalc||{};swlcalc.export=function(){var a={},b=function(){return{export_btn:$("a.export"),export_textarea:$("#export-textarea"),open_export_modal:$("#open-export-modal")}},c=function(){a=b(),d()},d=function(){a.export_btn.on("click",function(a){e()}),a.open_export_modal.on("shown",function(){a.export_textarea.focus()}),a.export_textarea.focus(function(){$(this).select(),$(this).mouseup(function(){return $(this).unbind("mouseup"),!1})})},e=function(){var b=f();a.export_textarea.attr("rows","1"),a.export_textarea.html(location.origin+location.pathname+"#"+b)},f=function(){var a="",b=0;for(var c in swlcalc.gear.slots){var d=swlcalc.gear.slots[c];a+=g(d,d.mappedState()),b<swlcalc.gear.nbSlots()-1&&(a+="&"),b++}return a},g=function(a,b){var c=a.id+"="+b.equipment_rarity+","+b.equipment_id+","+b.equipment_quality+","+b.equipment_level+","+b.glyph_rarity+","+b.glyph_id+","+b.glyph_quality+","+b.glyph_level;return c+=","+b.signet_rarity+","+b.signet_id+","+b.signet_level};return{init:c,createSlotUrl:g,createExportUrl:f,startExportUrl:e}}();var swlcalc=swlcalc||{};swlcalc.import=function(){var a=function(a,b){var c=swlcalc.gear.slots[a];c.equipmentRarity(swlcalc.data.rarity_mapping.to_name[b[0]]),c.el.equipmentRarity.change(),c.equipmentId("0"==b[1]?"none":b[1]),c.el.equipmentId.change(),c.isWeapon(),c.equipmentQuality(b[2]),c.el.equipmentQuality.change(),c.equipmentLevel(b[3]),c.el.equipmentLevel.change(),c.glyphRarity(swlcalc.data.rarity_mapping.to_name[b[4]]),c.el.glyphRarity.change(),c.glyphId(swlcalc.data.glyph_stat_mapping.to_stat[b[5]]),c.el.glyphId.change(),c.glyphQuality(b[6]),c.el.glyphQuality.change(),c.glyphLevel(b[7]),c.el.glyphLevel.change(),void 0!==b[8]&&void 0!==b[9]&&"999"!==b[9]&&void 0!==b[10]&&(c.signetRarity(swlcalc.data.rarity_mapping.to_name[b[8]]),c.signetId("0"!=b[9]?b[9]:"none"),c.signetLevel(b[10]),c.el.signetId.change(),c.el.signetRarity.change())};return{start:function(b){for(var c in b)b.hasOwnProperty(c)&&(splitVars=b[c].split(","),a(c,splitVars));swlcalc.summary.updateAllStats()}}}();var swlcalc=swlcalc||{};swlcalc.util=function(){return{capitalise:function(a){return a.charAt(0).toUpperCase()+a.slice(1)},blankIfNone:function(a){return"None"==a||"none"==a?"":a},precisionRound:function(a,b){var c=Math.pow(10,b);return Math.round(a*c)/c},sortAsc:function(a,b){return a>b?1:-1}}}(),Array.prototype.find||(Array.prototype.find=function(a){if(null===this)throw new TypeError("Array.prototype.find called on null or undefined");if("function"!=typeof a)throw new TypeError("predicate must be a function");for(var b,c=Object(this),d=c.length>>>0,e=arguments[1],f=0;f<d;f++)if(b=c[f],a.call(e,b,f,c))return b});var swlcalc=swlcalc||{};swlcalc.gear=function(){var a=function(){swlcalc.gear.slots.weapon2.sheathWeapon(),swlcalc.gear.slots.weapon.weaponDrawn=!0};return{slots:{},init:function(){for(var b=0;b<swlcalc.data.template_data.slots.length;b++){var c=swlcalc.data.template_data.slots[b];this.slots[c.id_prefix]=new swlcalc.gear.Slot(c),this.slots[c.id_prefix].el.nameWarning.hide()}a()},nbSlots:function(){return Object.keys(this.slots).length},reset:function(){
for(var a in this.slots)this.slots[a].reset()},state:function(){var a={};for(var b in this.slots)a[b]=this.slots[b].state();return a},mappedState:function(){var a={};for(var b in this.slots)a[b]=this.slots[b].mappedState();return a}}}(),swlcalc.gear.Slot=function(a){var b=this;this.id=a.id_prefix,this.name=a.name,this.kind=a.kind,this.type=a.type,this.group=a.group,this.weaponDrawn=!1,this.rawILvl=0,this.rawGlyphILvl=0,this.rawSignetILvl=0,this.el={div:$("#"+this.id+"-slot"),iLvl:$("#"+this.id+"-ilvl"),equipmentId:$("#"+this.id+"-equipment-id"),equipmentName:$("#"+this.id+"-equipment-name"),equipmentRarity:$("#"+this.id+"-equipment-rarity"),equipmentQuality:$("#"+this.id+"-equipment-quality"),equipmentLevel:$("#"+this.id+"-equipment-level"),equipmentPowerRating:$("#"+this.id+"-equipment-power-rating"),equipmentILvl:$("#"+this.id+"-equipment-ilvl"),equipmentImgIcon:$("#"+this.id+"-equipment-img-icon"),equipmentImgRarity:$("#"+this.id+"-equipment-img-rarity"),equipmentImgQuality:$("#"+this.id+"-equipment-img-quality"),equipmentLabelLevel:$("#"+this.id+"-equipment-label-level"),equipmentDescription:$("#"+this.id+"-equipment-description"),glyphId:$("#"+this.id+"-glyph-id"),glyphRarity:$("#"+this.id+"-glyph-rarity"),glyphQuality:$("#"+this.id+"-glyph-quality"),glyphLevel:$("#"+this.id+"-glyph-level"),glyphRating:$("#"+this.id+"-glyph-rating"),glyphLabel:$("#"+this.id+"-glyph-label"),glyphImgIcon:$("#"+this.id+"-glyph-img-icon"),glyphImgRarity:$("#"+this.id+"-glyph-img-rarity"),glyphImgQuality:$("#"+this.id+"-glyph-img-quality"),glyphLabelLevel:$("#"+this.id+"-glyph-label-level"),glyphILvl:$("#"+this.id+"-glyph-ilvl"),signetId:$("#"+this.id+"-signet-id"),signetRarity:$("#"+this.id+"-signet-rarity"),signetLevel:$("#"+this.id+"-signet-level"),signetImgIcon:$("#"+this.id+"-signet-img-icon"),signetImgRarity:$("#"+this.id+"-signet-img-rarity"),signetDescription:$("#"+this.id+"-signet-description"),signetLabelLevel:$("#"+this.id+"-signet-label-level"),signetILvl:$("#"+this.id+"-signet-ilvl"),nameWarning:$("#"+this.id+"-name-warning")},this.iLvl=function(){if(1!=arguments.length)return parseInt(this.el.iLvl.html());this.el.iLvl.html(arguments[0])},this.updateILvl=function(){this.iLvl(Math.round(this.rawILvl+this.rawGlyphILvl+this.rawSignetILvl))},this.equipmentName=function(){if(1!=arguments.length)return this.el.equipmentName.html();this.el.equipmentName.html(arguments[0])},this.isWeapon=function(){return"weapon"==this.group},this.sheathWeapon=function(){this.isWeapon()&&(this.weaponDrawn=!1,this.el.div.hide())},this.drawWeapon=function(){this.isWeapon()&&(this.weaponDrawn=!0,this.el.div.show())},this.equipmentId=function(){if(1!=arguments.length)return this.el.equipmentId.val();this.el.equipmentId.val(arguments[0])},this.equipmentData=function(){return swlcalc.data.equipments.slot[this.kind][this.equipmentId()-1]},this.equipmentRarity=function(){if(1!=arguments.length)return this.el.equipmentRarity.val();this.el.equipmentRarity.val(arguments[0])},this.equipmentQuality=function(){if(1!=arguments.length)return this.el.equipmentQuality.val();this.el.equipmentQuality.val(arguments[0])},this.equipmentLevel=function(){if(1!=arguments.length)return this.el.equipmentLevel.val();this.el.equipmentLevel.val(arguments[0])},this.getAttrFromEquipmentLevel=function(a){return this.el.equipmentLevel.attr(a)},this.equipmentPowerRating=function(){if(1!=arguments.length)return parseInt(this.el.equipmentPowerRating.html());this.el.equipmentPowerRating.html(arguments[0])},this.equipmentILvl=function(){if(1!=arguments.length)return parseInt(this.el.equipmentILvl.html());this.el.equipmentILvl.html(arguments[0])},this.equipmentDescription=function(){if(1!=arguments.length)return this.el.equipmentDescription.text();this.el.equipmentDescription.html(arguments[0])},this.equipmentBonusN=function(){if(2==arguments.length)$("#"+this.id+"-equipment-bonus"+arguments[0]).html(arguments[1]);else{if(1==arguments.length)return $("#"+this.id+"-equipment-bonus"+arguments[0]).html();console.log("Error on this.equipmentBonusN() call")}},this.equipmentImgIcon=function(){if(1!=arguments.length)return this.el.equipmentImgIcon.attr("src");this.el.equipmentImgIcon.attr("src",arguments[0])},this.equipmentImgRarity=function(){if(1!=arguments.length)return this.el.equipmentImgRarity.attr("src");this.el.equipmentImgRarity.attr("src",arguments[0])},this.equipmentImgQuality=function(){if(1!=arguments.length)return this.el.equipmentImgQuality.attr("src");this.el.equipmentImgQuality.attr("src",arguments[0])},this.equipmentLabelLevel=function(){if(1!=arguments.length)return this.el.equipmentLabelLevel.text();this.el.equipmentLabelLevel.html(arguments[0])},this.updateEquipment=function(){var a;if("none"==this.equipmentId())this.equipmentImgIcon("assets/images/icons/"+this.type+"/None.png"),a="";else{var c=this.equipmentData(),d=new Image;d.onload=function(){b.equipmentImgIcon("assets/images/icons/"+b.type+"/"+c.name+".png")},d.onerror=function(){b.isWeapon()?b.equipmentImgIcon("assets/images/icons/"+b.type+"/temp/"+c.type+".png"):b.equipmentImgIcon("assets/images/icons/"+b.type+"/"+swlcalc.data.equipments.slot[b.id][0].name+".png")},d.src="assets/images/icons/"+this.type+"/"+c.name+".png",a=c.description,this.isWeapon()&&(a=a.replace(/%id/g,this.id))}this.equipmentDescription(a)},this.updateEquipmentLevel=function(){var a=swlcalc.data.rarity_mapping.to_max_level[this.equipmentRarity()];this.el.equipmentLevel.attr("max",a),this.equipmentLevel(a),this.updateEquipmentLabelLevelText(),this.updateEquipmentLabelLevelColor()},this.updateEquipmentPowerRating=function(){var a=0,b=0;"none"!=this.equipmentId()&&(this.isWeapon()?(a=swlcalc.data.power_rating.weapon[this.equipmentRarity()].weapon_power_init,b=swlcalc.data.power_rating.weapon[this.equipmentRarity()].weapon_power_per_level*(this.equipmentLevel()-1)):(a=swlcalc.data.power_rating[this.group][this.equipmentRarity()][this.equipmentQuality()].power_rating_init,b=swlcalc.data.power_rating[this.group][this.equipmentRarity()][this.equipmentQuality()].power_rating_per_level*(this.equipmentLevel()-1)));var c=a+Math.round(b);0!==c&&(c="+"+c),this.equipmentPowerRating(c)},this.updateEquipmentILvl=function(){var a=0;"none"!=this.equipmentId()&&(a=this.computeItemILvl("equipment",this.equipmentRarity(),this.equipmentLevel()),this.isWeapon()&&(a*=1.15)),this.rawILvl=a,this.equipmentILvl(Math.round(a)),this.updateILvl()},this.updateEquipmentBonuses=function(a,b){if(void 0!==this.equipmentBonusN(1)){var c=this.equipmentData(),d=0;for(i=0;i<c.coefficients.length;i++)"Combat Power"==c.stats[i]?d=a:"Healing Power"==c.stats[i]&&(d=b),this.equipmentBonusN(i+1,Math.round(c.coefficients[i]*d))}},this.updateEquipmentImgRarity=function(){var a="assets/images/icons/rarity/"+this.equipmentRarity()+"-42x42.png";this.equipmentImgRarity(a)},this.updateEquipmentImgQuality=function(){var a="assets/images/icons/quality/"+this.equipmentQuality()+".png";this.equipmentImgQuality(a)},this.updateEquipmentLabelLevelText=function(){this.equipmentLabelLevel(this.equipmentLevel())},this.updateEquipmentLabelLevelColor=function(){this.el.equipmentLabelLevel.attr("class","equipment-label-level border-"+this.equipmentRarity())},this.glyphId=function(){if(1!=arguments.length)return this.el.glyphId.val();this.el.glyphId.val(arguments[0])},this.glyphRarity=function(){if(1!=arguments.length)return this.el.glyphRarity.val();this.el.glyphRarity.val(arguments[0])},this.glyphQuality=function(){if(1!=arguments.length)return this.el.glyphQuality.val();this.el.glyphQuality.val(arguments[0])},this.glyphLevel=function(){if(1!=arguments.length)return this.el.glyphLevel.val();this.el.glyphLevel.val(arguments[0])},this.getAttrFromGlyphLevel=function(a){return this.el.glyphLevel.attr(a)},this.glyphRating=function(){if(1!=arguments.length)return parseInt(this.el.glyphRating.html());this.el.glyphRating.html(arguments[0])},this.glyphLabel=function(){if(1!=arguments.length)return this.el.glyphLabel.html();this.el.glyphLabel.html(arguments[0])},this.glyphILvl=function(){if(1!=arguments.length)return parseInt(this.el.glyphILvl.html());this.el.glyphILvl.html(arguments[0])},this.glyphImgIcon=function(){if(1!=arguments.length)return this.el.glyphImgIcon.attr("src");this.el.glyphImgIcon.attr("src",arguments[0])},this.glyphImgRarity=function(){if(1!=arguments.length)return this.el.glyphImgRarity.attr("src");this.el.glyphImgRarity.attr("src",arguments[0])},this.glyphImgQuality=function(){if(1!=arguments.length)return this.el.glyphImgQuality.attr("src");this.el.glyphImgQuality.attr("src",arguments[0])},this.glyphLabelLevel=function(){if(1!=arguments.length)return this.el.glyphLabelLevel.text();this.el.glyphLabelLevel.html(arguments[0])},this.updateGlyphRating=function(){var a=0;if("none"!=this.glyphId()){var b=swlcalc.data.glyph[this.glyphRarity()][this.glyphQuality()].rating_init,c=swlcalc.data.glyph[this.glyphRarity()][this.glyphQuality()].rating_per_level*(this.glyphLevel()-1);a=b+Math.round(c),"critical-power"==this.glyphId()&&(a*=.973),a=a.toFixed(0),0!==a&&(a="+"+a)}this.glyphRating(a)},this.updateGlyphImgIcon=function(){var a="assets/images/icons/glyph/"+this.glyphId()+".png";this.glyphImgIcon(a)},this.updateGlyphImgRarity=function(){var a="assets/images/icons/rarity/"+this.glyphRarity()+"-42x42.png";this.glyphImgRarity(a)},this.updateGlyphImgQuality=function(){var a="assets/images/icons/quality/"+this.glyphQuality()+".png";this.glyphImgQuality(a)},this.updateGlyphILvl=function(){var a=0;"none"!=this.glyphId()&&(a=this.computeItemILvl("glyph",this.glyphRarity(),this.glyphLevel()),this.isWeapon()&&(a*=1.225)),this.rawGlyphILvl=a,this.glyphILvl(Math.round(a)),this.updateILvl()},this.updateGlyphLabel=function(){this.glyphLabel(" "+swlcalc.data.glyph_stat_mapping.to_stat_GUIformat[this.glyphId()])},this.updateGlyphLabelLevelText=function(){this.glyphLabelLevel(this.glyphLevel())},this.updateGlyphLabelLevelColor=function(){this.el.glyphLabelLevel.attr("class","glyph-label-level border-"+this.glyphRarity())},this.signetData=function(){return"none"==this.signetId()||void 0==this.signetId()||null==this.signetId()?swlcalc.data.signets.noneSignet:swlcalc.data.signets.slot[this.kind][this.signetId()-1]},this.signetId=function(){if(1!=arguments.length)return this.el.signetId.val();this.el.signetId.val(arguments[0])},this.signetRarity=function(){if(1!=arguments.length)return this.el.signetRarity.val();this.el.signetRarity.val(arguments[0])},this.signetLevel=function(){if(1!=arguments.length)return this.el.signetLevel.val();this.el.signetLevel.val(arguments[0])},this.getAttrFromSignetLevel=function(a){return this.el.signetLevel.attr(a)},this.signetILvl=function(){if(1!=arguments.length)return this.isWeapon()?void 0:parseInt(this.el.signetILvl.html());this.el.signetILvl.html(arguments[0])},this.signetDescription=function(){if(1!=arguments.length)return this.el.signetDescription.text();this.el.signetDescription.html(arguments[0])},this.signetBonus=function(){if(1!=arguments.length)return $("#"+this.id+"signet-bonus").html();$("#"+this.id+"-signet-bonus").html(arguments[0])},this.signetImgIcon=function(){if(1!=arguments.length)return this.el.signetImgIcon.attr("src");this.el.signetImgIcon.attr("src",arguments[0])},this.signetImgRarity=function(){if(1!=arguments.length)return this.el.signetImgRarity.attr("src");this.el.signetImgRarity.attr("src",arguments[0])},this.signetLabelLevel=function(){if(1!=arguments.length)return this.el.signetLabelLevel.text();this.el.signetLabelLevel.html(arguments[0])},this.updateSignet=function(){this.updateSignetImgIcon(),this.updateSignetImgRarity();var a=this.signetData(),b=a.description;this.isWeapon()&&(b=b.replace(/%id/g,this.id)),this.signetDescription(b),this.updateSignetBonus()},this.updateSignetImgIcon=function(){var a=this.signetData(),b=a==swlcalc.data.signets.noneSignet?"none":this.id,c="assets/images/icons/signet/"+b+".png";this.signetImgIcon(c)},this.updateSignetImgRarity=function(){var a="assets/images/icons/rarity/"+this.signetRarity()+"-42x42.png";this.signetImgRarity(a)},this.updateSignetDescription=function(){this.el.signetDescription.html(this.signetDescription())},this.updateSignetBonus=function(a,b){var c=0,d=1;if(0!=this.signetData().id){var e=swlcalc.data.signets.slot[this.kind][this.signetId()-1];if(this.isWeapon())c=e.quality[this.equipmentQuality()];else{if("Signet of Shoulder Tackle"==e.name)return bonus1=e.ratio[this.signetRarity()].init[0],bonus2=e.ratio[this.signetRarity()].init[1]-e.ratio[this.signetRarity()].per_level[1]*(this.signetLevel()-1),$("#"+this.id+"-signet-bonus").html(bonus1),void $("#"+this.id+"-signet-bonus2").html(swlcalc.util.precisionRound(bonus2,4));c="Signet of Contortion"==e.name?e.ratio[this.signetRarity()].init-e.ratio[this.signetRarity()].per_level*(this.signetLevel()-1):e.ratio[this.signetRarity()].init+e.ratio[this.signetRarity()].per_level*(this.signetLevel()-1)}void 0!=e.stat&&("Combat Power"==e.stat?d=a:"Healing Power"==e.stat&&(d=b))}c*=d,c=swlcalc.util.precisionRound(c,4),this.signetBonus(c)},this.updateSignetILvl=function(){var a=0;"none"!=this.signetId()&&(a=this.computeItemILvl("signet",this.signetRarity(),this.signetLevel())),this.rawSignetILvl=a,this.signetILvl(Math.round(a)),this.updateILvl()},this.updateSignetLabelLevelText=function(){this.signetLabelLevel(this.signetLevel())},this.updateSignetLabelLevelColor=function(){this.el.signetLabelLevel.attr("class","signet-label-level border-"+this.signetRarity())},this.reset=function(){this.el.equipmentId.prop("selectedIndex",0),this.el.equipmentRarity.prop("selectedIndex",0),this.el.equipmentQuality.prop("selectedIndex",0),this.el.glyphId.prop("selectedIndex",0),this.el.glyphRarity.prop("selectedIndex",0),this.el.glyphQuality.prop("selectedIndex",0),this.el.glyphLevel.val("20"),this.el.signetId.prop("selectedIndex",0),this.el.signetRarity.prop("selectedIndex",0),this.el.signetLevel.val("20"),this.el.equipmentId.change(),this.el.equipmentRarity.change(),this.el.equipmentQuality.change(),this.el.glyphId.change(),this.el.glyphRarity.change(),this.el.glyphQuality.change(),this.el.glyphLevel.change(),this.el.signetId.change(),this.el.signetRarity.change(),this.el.signetLevel.change(),this.updateSignet()},this.state=function(){return{equipment_rarity:this.equipmentRarity(),equipment_quality:this.equipmentQuality(),equipment_level:this.equipmentLevel(),glyph_id:this.glyphId(),glyph_rarity:this.glyphRarity(),glyph_quality:this.glyphQuality(),glyph_level:this.glyphLevel(),signet_id:this.signetId(),signet_rarity:this.signetRarity(),signet_level:this.signetLevel()}},this.mappedState=function(){var a=swlcalc.data.glyph_stat_mapping.to_num,b=swlcalc.data.rarity_mapping.to_num;return{equipment_id:this.stripContent(this.equipmentId()),equipment_rarity:this.stripContent(this.equipmentRarity(),b),equipment_quality:this.equipmentQuality(),equipment_level:this.equipmentLevel(),glyph_id:this.stripContent(this.glyphId(),a),glyph_rarity:this.stripContent(this.glyphRarity(),b),glyph_quality:this.glyphQuality(),glyph_level:this.glyphLevel(),signet_id:this.stripContent(this.signetId()),signet_rarity:this.stripContent(this.signetRarity(),b),signet_level:this.stripContent(this.signetLevel())}},this.stripContent=function(a,b){return null==a||"none"==a||void 0===a?0:void 0!==b?b[a]:a},this.computeItemILvl=function(a,b,c){var d=swlcalc.data.ilvl.gear[a].rarity[b];return d.ilvl_init+d.ilvl_per_level*(c-1)}};